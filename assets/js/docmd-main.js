/*! Source file from the docmd project â€” https://github.com/docmd-io/docmd */


function initializeCollapsibleNav(){const t=document.querySelector(".sidebar-nav");t&&t.querySelectorAll("li.collapsible").forEach(o=>{const n=o.querySelector("a"),i=o.querySelector(".submenu");!n||!i||n.addEventListener("click",c=>{const e=n.getAttribute("href");if(!e||e==="#"||c.target.closest(".collapse-icon")){c.preventDefault();const r=!(o.getAttribute("aria-expanded")==="true");o.setAttribute("aria-expanded",r),i.style.display=r?"block":"none"}})})}function initializeMobileMenus(){const t=document.querySelector(".sidebar-menu-button"),o=document.querySelector(".sidebar");t&&o&&t.addEventListener("click",s=>{s.stopPropagation(),o.classList.toggle("mobile-expanded")});const n=document.querySelector(".toc-menu-button"),i=document.querySelector(".toc-container"),c=document.querySelector(".toc-title"),e=s=>{window.getComputedStyle(n).display!=="none"&&(s.stopPropagation(),i.classList.toggle("mobile-expanded"))};n&&i&&(n.addEventListener("click",e),c&&c.addEventListener("click",e))}function initializeSidebarScroll(){const t=document.querySelector(".sidebar");t&&requestAnimationFrame(()=>{const o=t.querySelector("a.active");o&&o.scrollIntoView({behavior:"auto",block:"center",inline:"nearest"})})}function setupThemeToggleListener(){const t=document.getElementById("theme-toggle-button");function o(n){const c=["light","dark"].includes(n)?n:"light";document.documentElement.setAttribute("data-theme",c),document.body.setAttribute("data-theme",c),localStorage.setItem("docmd-theme",c);const e=document.getElementById("highlight-theme");if(e){const s=e.getAttribute("data-base-href");if(s){const l=`docmd-highlight-${c}.css`,r=s+l;e.setAttribute("href",encodeURI(r))}}}t&&t.addEventListener("click",()=>{const i=document.documentElement.getAttribute("data-theme")==="light"?"dark":"light";o(i)})}function initializeSidebarToggle(){const t=document.getElementById("sidebar-toggle-button"),o=document.body;if(!o.classList.contains("sidebar-collapsible")||!t)return;const n=o.dataset.defaultCollapsed==="true";let i=localStorage.getItem("docmd-sidebar-collapsed");i===null?i=n:i=i==="true",i&&o.classList.add("sidebar-collapsed"),t.addEventListener("click",()=>{o.classList.toggle("sidebar-collapsed");const c=o.classList.contains("sidebar-collapsed");localStorage.setItem("docmd-sidebar-collapsed",c)})}function initializeTabs(){document.querySelectorAll(".docmd-tabs").forEach(t=>{const o=t.querySelectorAll(".docmd-tabs-nav-item"),n=t.querySelectorAll(".docmd-tab-pane");o.forEach((i,c)=>{i.addEventListener("click",()=>{o.forEach(e=>e.classList.remove("active")),n.forEach(e=>e.classList.remove("active")),i.classList.add("active"),n[c]&&n[c].classList.add("active")})})})}function initializeCopyCodeButtons(){if(document.body.dataset.copyCodeEnabled!=="true")return;const t='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg>',o='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><polyline points="20 6 9 17 4 12"></polyline></svg>';document.querySelectorAll("pre").forEach(n=>{const i=n.querySelector("code");if(!i)return;const c=document.createElement("div");c.style.position="relative",c.style.display="block",n.parentNode.insertBefore(c,n),c.appendChild(n),n.style.position="static";const e=document.createElement("button");e.className="copy-code-button",e.innerHTML=t,e.setAttribute("aria-label","Copy code to clipboard"),c.appendChild(e),e.addEventListener("click",()=>{navigator.clipboard.writeText(i.innerText).then(()=>{e.innerHTML=o,e.classList.add("copied"),setTimeout(()=>{e.innerHTML=t,e.classList.remove("copied")},2e3)}).catch(s=>{console.error("Failed to copy text: ",s),e.innerText="Error"})})})}function syncBodyTheme(){const t=document.documentElement.getAttribute("data-theme");t&&document.body&&document.body.setAttribute("data-theme",t)}function initializeScrollSpy(){const t=document.querySelectorAll(".toc-link"),o=document.querySelectorAll(".main-content h2, .main-content h3");if(t.length===0||o.length===0)return;const n={root:null,rootMargin:"-10% 0px -80% 0px",threshold:0},i=new IntersectionObserver(c=>{c.forEach(e=>{if(e.isIntersecting){t.forEach(r=>r.classList.remove("active"));const s=e.target.getAttribute("id"),l=document.querySelector(`.toc-link[href="#${s}"]`);l&&l.classList.add("active")}})},n);o.forEach(c=>i.observe(c))}document.addEventListener("DOMContentLoaded",()=>{syncBodyTheme(),setupThemeToggleListener(),initializeSidebarToggle(),initializeTabs(),initializeCopyCodeButtons(),initializeCollapsibleNav(),initializeMobileMenus(),initializeSidebarScroll(),initializeScrollSpy()});
