<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sazami Demo</title>
    <style>
      :root {
        color-scheme: light;
      }
      * {
        box-sizing: border-box;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        margin: 0;
        padding: 0;
        background: var(--demo-bg, #f0f2f5);
        color: var(--demo-text, #1f2937);
        transition: background 0.3s ease, color 0.3s ease;
      }
      header {
        background: var(--demo-header-bg, #fff);
        border-bottom: 1px solid var(--demo-border, #e0e0e0);
        padding: 16px 24px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        z-index: 100;
      }
      header h1 {
        margin: 0;
        font-size: 20px;
        font-weight: 600;
      }
      header h1 span {
        color: #2563eb;
      }
      .theme-bar {
        display: flex;
        gap: 8px;
      }
      .theme-btn {
        border: 2px solid transparent;
        border-radius: 6px;
        padding: 6px 14px;
        font-size: 13px;
        cursor: pointer;
        font-family: inherit;
        transition: border-color 0.2s ease, background 0.2s ease;
      }
      .theme-btn:hover {
        border-color: #2563eb;
      }
      .theme-btn.active {
        border-color: #2563eb;
        background: rgba(37, 99, 235, 0.08);
      }
      .theme-btn[data-theme="light"] {
        background: #fff;
        color: #1f2937;
      }
      .theme-btn[data-theme="dark"] {
        background: #1e293b;
        color: #f1f5f9;
      }
      .theme-btn[data-theme="warm"] {
        background: #fef3c7;
        color: #78350f;
      }
      main {
        max-width: 860px;
        margin: 0 auto;
        padding: 32px 24px;
      }
      .demo-section {
        margin-bottom: 40px;
      }
      .demo-section h2 {
        font-size: 16px;
        font-weight: 600;
        margin: 0 0 4px;
        color: var(--demo-heading, #374151);
      }
      .demo-section p.desc {
        font-size: 13px;
        color: var(--demo-dim, #6b7280);
        margin: 0 0 16px;
      }
      .demo-output {
        border: 1px solid var(--demo-border, #e0e0e0);
        border-radius: 12px;
        padding: 24px;
        background: var(--demo-card-bg, #fff);
      }
      .error-display {
        background: #fef2f2;
        border: 1px solid #fca5a5;
        border-radius: 8px;
        padding: 12px 16px;
        color: #991b1b;
        font-family: monospace;
        font-size: 13px;
        white-space: pre-wrap;
        margin-top: 12px;
        display: none;
      }
      .dark-theme {
        --demo-bg: #0f172a;
        --demo-text: #f1f5f9;
        --demo-header-bg: #1e293b;
        --demo-border: #334155;
        --demo-heading: #e2e8f0;
        --demo-dim: #94a3b8;
        --demo-card-bg: #1e293b;
        --saz-color-surface: #1e293b;
        --saz-color-bg: #0f172a;
        --saz-color-text: #f1f5f9;
        --saz-color-text-dim: #94a3b8;
        --saz-color-border: #334155;
        --saz-shadow-soft: 0 1px 3px rgba(0, 0, 0, 0.4);
        --saz-shadow-medium: 0 4px 8px rgba(0, 0, 0, 0.4);
      }
      .warm-theme {
        --demo-bg: #fffbeb;
        --demo-text: #78350f;
        --demo-header-bg: #fef3c7;
        --demo-border: #fbbf24;
        --demo-heading: #92400e;
        --demo-dim: #a16207;
        --demo-card-bg: #fefce8;
        --saz-color-surface: #fefce8;
        --saz-color-bg: #fffbeb;
        --saz-color-text: #78350f;
        --saz-color-text-dim: #a16207;
        --saz-color-border: #fbbf24;
        --saz-color-primary: #d97706;
        --saz-color-accent: #ea580c;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Sazami <span>Demo</span></h1>
      <div class="theme-bar">
        <button class="theme-btn active" data-theme="light">Light</button>
        <button class="theme-btn" data-theme="dark">Dark</button>
        <button class="theme-btn" data-theme="warm">Warm</button>
      </div>
    </header>

    <main>
      <section class="demo-section">
        <h2>Welcome Card</h2>
        <p class="desc">A card with heading, text, and action buttons.</p>
        <div class="demo-output" id="demo-welcome"></div>
      </section>

      <section class="demo-section">
        <h2>Buttons</h2>
        <p class="desc">All button variants and sizes.</p>
        <div class="demo-output" id="demo-buttons"></div>
      </section>

      <section class="demo-section">
        <h2>Form Controls</h2>
        <p class="desc">
          Inputs, checkboxes, and toggles with proper accessibility.
        </p>
        <div class="demo-output" id="demo-forms"></div>
      </section>

      <section class="demo-section">
        <h2>Icons</h2>
        <p class="desc">SVG icons at different sizes and colors.</p>
        <div class="demo-output" id="demo-icons"></div>
      </section>

      <section class="demo-section">
        <h2>Grid Layout</h2>
        <p class="desc">Responsive grid with cards.</p>
        <div class="demo-output" id="demo-grid"></div>
      </section>

      <section class="demo-section">
        <h2>Media Player</h2>
        <p class="desc">A media player card with icon buttons.</p>
        <div class="demo-output" id="demo-player"></div>
      </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <script>
      eruda.init();
    </script>
    <script type="module">
      import { compileSakko, injectThemeCSS } from "../Build/dist/index.mjs";

      injectThemeCSS();

      function render(id, source) {
        const el = document.getElementById(id);
        try {
          compileSakko(source, el);
        } catch (err) {
          const errDiv = document.createElement("div");
          errDiv.className = "error-display";
          errDiv.style.display = "block";
          errDiv.textContent = err.message;
          el.appendChild(errDiv);
        }
      }

      render(
        "demo-welcome",
        `
        <card {
          heading: "Welcome to Sazami"
          text: "A zero-dependency UI engine powered by the Sakko language. Write declarative markup, get semantic web components with curvomorphic styling."
          row(gap medium): [
            button(primary): "Get Started",
            button(dim): "Learn More"
          ]
        }>
      `
      );

      render(
        "demo-buttons",
        `
        <stack(gap medium) {
          row(gap small center): [
            button(primary): "Primary",
            button(secondary): "Secondary",
            button(accent): "Accent",
            button(danger): "Danger",
            button(success): "Success",
            button(dim): "Dim"
          ];
          row(gap small center): [
            button(primary small): "Small",
            button(primary medium): "Medium",
            button(primary large): "Large"
          ];
          row(gap small center): [
            button(disabled): "Disabled",
            button(loading): "Loading..."
          ]
        }>
      `
      );

      render(
        "demo-forms",
        `
        <stack(gap medium) {
          row(gap medium): [
            input(placeholder "Your name"): "",
            input(placeholder "you@example.com" type "email"): ""
          ];
          row(gap large center): [
            checkbox: "Accept terms",
            checkbox(checked): "Newsletter"
          ];
          row(gap large center): [
            toggle: "Dark mode",
            toggle(checked): "Notifications"
          ]
        }>
      `
      );

      render(
        "demo-icons",
        `
        <stack(gap medium) {
          row(gap medium center): [
            icon: "play",
            icon: "pause",
            icon: "stop",
            icon: "previous",
            icon: "next",
            icon: "close",
            icon: "menu",
            icon: "search",
            icon: "settings"
          ];
          row(gap medium center): [
            icon: "heart",
            icon: "star",
            icon: "check",
            icon: "plus",
            icon: "minus",
            icon: "edit",
            icon: "share",
            icon: "download",
            icon: "upload",
            icon: "refresh"
          ];
          row(gap small center): [
            icon(small): "home",
            icon: "home",
            icon(large): "home"
          ];
          row(gap medium center): [
            icon(primary): "heart",
            icon(accent): "heart",
            icon(dim): "heart"
          ]
        }>
      `
      );

      render(
        "demo-grid",
        `
        <grid(cols 3 gap medium) {
          card { heading: "Analytics"; text: "View your dashboard metrics and trends." },
          card(primary) { heading: "Reports"; text: "Generate and export reports." },
          card { heading: "Settings"; text: "Configure your preferences." },
          card(accent) { heading: "Featured"; text(bold): "New release available!" },
          card { heading: "Billing"; text: "Manage your subscription." },
          card { heading: "Support"; text: "Get help and documentation." }
        }>
      `
      );

      render(
        "demo-player",
        `
        <card {
          row(center gap medium) {
            image(src "https://placehold.co/80x80/2563eb/white?text=Album"): ""
            stack(gap tiny) {
              heading: "A Song"
              text(dim): "An Artist"
            }
          };
          row(center gap medium): [
            icon-btn: "previous",
            icon-btn(large primary): "play",
            icon-btn: "next"
          ];
          divider
        }>
      `
      );

      // Theme switching
      document.querySelectorAll(".theme-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          document
            .querySelectorAll(".theme-btn")
            .forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
          const theme = btn.dataset.theme;
          document.body.className =
            theme === "dark"
              ? "dark-theme"
              : theme === "warm"
              ? "warm-theme"
              : "";
        });
      });
    </script>
  </body>
</html>
